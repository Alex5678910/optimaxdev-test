{"version":3,"sources":["types/index.ts","hooks/useTypeSelector.ts","store/action-creators/CartFetch.ts","components/MenuList.tsx","components/FormItem.tsx","App.tsx","reportWebVitals.ts","store/redusers/rootReducer.ts","store/redusers/index.ts","store/index.ts","index.tsx"],"names":["ActionTypes","useTypedSelector","useSelector","MenuList","state","menu","loading","error","dispatch","useDispatch","useEffect","a","type","FETCH_MENU","fetch","headers","then","res","json","db","FETCH_MENU_SUCCESS","payload","FETCH_MENU_ERROR","className","length","map","e","index","title","onClick","elem","PLUS_ITEM","id","quantity","find","MINUS_ITEM","price","confirm","REMOVE_ITEM","FormItem","useState","setTitle","setQuantity","setPrice","inputRef","useRef","onSubmit","preventDefault","ADD_CART","Date","current","focus","ref","placeholder","value","onChange","event","target","slice","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","initialState","rootReducer","combineReducers","action","filter","el","store","createStore","applyMiddleware","thunk","ReactDOM","render","document","getElementById"],"mappings":"iKAMYA,E,sCCHCC,EAAoDC,I,mCDGrDF,K,wBAAAA,E,wCAAAA,E,oCAAAA,E,0BAAAA,E,sBAAAA,E,wBAAAA,E,qBAAAA,M,KEEL,I,OCwFQG,EArFY,WACvB,MAA+BF,GAAiB,SAAAG,GAAK,OAAIA,EAAMC,QAAxDC,EAAP,EAAOA,QAASC,EAAhB,EAAgBA,MAAOF,EAAvB,EAAuBA,KACjBG,EAAWC,cASjB,GAJAC,qBAAU,WACNF,EDVJ,uCAAO,WAAOA,GAAP,eAAAG,EAAA,sEAECH,EAAS,CAACI,KAAMZ,EAAYa,aAF7B,SAGgBC,MAAM,6BAA8B,CAC/CC,QAAS,CAAE,eAAgB,sBAC5BC,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UALpB,OAGKC,EAHL,OAOCX,EAAS,CAACI,KAAMZ,EAAYoB,mBAAoBC,QAASF,IAP1D,gDASCX,EAAS,CAACI,KAAMZ,EAAYsB,iBAAkBD,QAAS,8LATxD,yDAAP,yDCWG,CAACb,IAEAF,EACA,OAAO,6CAGX,GAAIC,EACA,OAAO,6BAAKA,IAgChB,OACI,mCACI,wBAAOgB,UAAW,QAAlB,UACI,uBAAOA,UAAW,QAAlB,SACA,+BACI,oBAAIA,UAAW,YAAf,0BACA,oBAAIA,UAAW,YAAf,sBACA,oBAAIA,UAAW,YAAf,wBAGJ,gCACClB,EAAKmB,OAAS,EACXnB,EAAKoB,KAAI,SAACC,EAAGC,GACT,OACI,+BACI,oBAAIJ,UAAW,WAAf,SAA4BG,EAAEE,QAC9B,+BAAI,sBAAML,UAAW,WAAYM,QAAS,kBAhCjDC,EAgCmEJ,OA/BpFlB,EAAS,CAACI,KAAMZ,EAAY+B,UAAWV,QAASS,EAAKE,KADrC,IAACF,GAgCW,eACA,+BAAOJ,EAAEO,WACT,sBAAMV,UAAW,WACXM,QAAS,kBA5BzBC,EA4B4CJ,OA3BlDrB,EAAK6B,MAAK,SAAAR,GAClB,OAAOA,EAAEO,WAAaH,EAAKG,YAEvBA,SAAW,GACfzB,EAAS,CAACI,KAAMZ,EAAYmC,WAAYd,QAASS,EAAKE,MALzC,IAACF,GA2BU,kBAGJ,6BAAKJ,EAAEU,QACP,6BACI,wBAAQb,UAAW,MAAOM,QAAS,kBAjD5CC,EAiDgEJ,OAhD/DW,QAAQ,iDAExB7B,EAAS,CAACI,KAAMZ,EAAYsC,YAAajB,QAASS,EAAKE,MAHzC,IAACF,GAiDS,qBATCH,MAaZ,oBAAIJ,UAAW,WAAf,SACD,sD,OCHTgB,EAhFY,WACvB,IAAM/B,EAAWC,cACjB,EAA0B+B,mBAAiB,IAA3C,mBAAOZ,EAAP,KAAca,EAAd,KACA,EAAgCD,mBAAiB,GAAjD,mBAAOP,EAAP,KAAiBS,EAAjB,KACA,EAA0BF,mBAAiB,GAA3C,mBAAOJ,EAAP,KAAcO,EAAd,KACMC,EAAWC,mBAwCjB,OACI,uBAAMC,SA1BM,SAACpB,GACbA,EAAEqB,iBACEnB,GAASQ,GAASH,GAClBzB,EAAS,CACLI,KAAMZ,EAAYgD,SAClB3B,QAAS,CACLO,QACAQ,QACAH,WACAD,GAAI,IAAIiB,QAIP,KAAVrB,IACCgB,EAASM,QAAQC,QACjBT,EAAYT,GACZU,EAASP,IAEA,KAAVR,IACCa,EAAS,IACTC,EAAY,GACZC,EAAS,KAKb,UACI,wBAAQ/B,KAAK,SAAb,0BACA,kCACI,uBACIwC,IAAKR,EACLS,YAAa,kBACbzC,KAAK,OACL0C,MAAO1B,EACP2B,SA/CK,SAACC,GAClBf,EAASe,EAAMC,OAAOH,MAAMI,MAAM,EAAG,QAwCjC,kBAUA,kCACI,uBACIL,YAAa,sBACbzC,KAAK,SACL0C,MAAOrB,EACPsB,SArDK,SAACC,GAClBd,GAAac,EAAMC,OAAOH,MAAMI,MAAM,EAAG,OA+CrC,cASA,kCACI,uBACIL,YAAa,mBACbzC,KAAK,SACL0C,MAAOlB,EACPmB,SA3DK,SAACC,GAClBb,GAAUa,EAAMC,OAAOH,MAAMI,MAAM,EAAG,OAqDlC,eC1DGC,MATf,WACI,OACI,sBAAKpC,UAAU,MAAf,UACI,cAAC,EAAD,IACA,cAAC,EAAD,QCMGqC,EAZS,SAACC,GACnBA,GAAeA,aAAuBC,UACxC,6BAAqB9C,MAAK,YAAkD,IAA/C+C,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,O,8BCPRO,EAA0B,CAC5B/D,KAAM,GACNC,SAAS,EACTC,MAAO,MCFE8D,EAAcC,YAAgB,CACvCjE,KDImB,WAA0D,IAAzDD,EAAwD,uDAAhDgE,EAAcG,EAAkC,uCAC5E,OAAQA,EAAO3D,MACX,KAAKZ,EAAYa,WACb,MAAO,CACHP,SAAS,EACTC,MAAO,KACPF,KAAM,IAEd,KAAKL,EAAYoB,mBACb,MAAO,CACHd,SAAS,EACTC,MAAO,KACPF,KAAMkE,EAAOlD,SAErB,KAAKrB,EAAYsB,iBACb,MAAO,CACHhB,SAAS,EACTC,MAAOgE,EAAOlD,QACdhB,KAAM,IAEd,KAAML,EAAYsC,YACd,OAAO,2BACAlC,GADP,IACcC,KAAMD,EAAMC,KAAKmE,QAAO,qBAAGxC,KAAgBuC,EAAOlD,aAEpE,KAAMrB,EAAY+B,UACd,OAAO,2BACA3B,GADP,IACcC,KAAMD,EAAMC,KAAKoB,KAAI,SAAAgD,GAAE,OAAIA,EAAGzC,KAAOuC,EAAOlD,QAAjB,2BAAgCoD,GAAhC,IAAoCxC,SAAUwC,EAAGxC,SAAW,IAAKwC,OAE9G,KAAMzE,EAAYmC,WACd,OAAO,2BACA/B,GADP,IACcC,KAAMD,EAAMC,KAAKoB,KAAI,SAAAgD,GAAE,OAAIA,EAAGzC,KAAOuC,EAAOlD,QAAjB,2BAAgCoD,GAAhC,IAAoCxC,SAAUwC,EAAGxC,SAAW,IAAKwC,OAE9G,KAAMzE,EAAYgD,SACd,OAAO,2BACA5C,GADP,IACcC,KAAK,CAAEkE,EAAOlD,SAAV,mBAAsBjB,EAAMC,SAElD,QACI,OAAOD,MEzCNsE,EAAQC,YAAYN,EAAaO,YAAgBC,MCI9DC,IAASC,OACP,cAAC,IAAD,CAAUL,MAAOA,EAAjB,SACE,cAAC,EAAD,MACWM,SAASC,eAAe,SAGvCrB,M","file":"static/js/main.cbfc54f2.chunk.js","sourcesContent":["export interface MenuState {\r\n    menu: any[];\r\n    loading: boolean;\r\n    error: null | string;\r\n}\r\n\r\nexport enum ActionTypes {\r\n    FETCH_MENU = 'FETCH_MENU',\r\n    FETCH_MENU_SUCCESS = 'FETCH_MENU_SUCCESS',\r\n    FETCH_MENU_ERROR = 'FETCH_MENU_ERROR',\r\n    REMOVE_ITEM = 'REMOVE_ITEM',\r\n    PLUS_ITEM = 'PLUS_ITEM',\r\n    MINUS_ITEM='MINUS_ITEM',\r\n    ADD_CART='ADD_CART'\r\n}\r\n\r\ninterface FetchMenuAction {\r\n    type: ActionTypes.FETCH_MENU\r\n}\r\n\r\ninterface FetchMenuSuccessAction {\r\n    type: ActionTypes.FETCH_MENU_SUCCESS;\r\n    payload: any[]\r\n}\r\n\r\ninterface addCart {\r\n    type: ActionTypes.ADD_CART;\r\n    payload: {}\r\n}\r\n\r\ninterface FetchMenuErrorAction {\r\n    type: ActionTypes.FETCH_MENU_ERROR;\r\n    payload: string\r\n}\r\n\r\ninterface RemoveItem {\r\n    type: ActionTypes.REMOVE_ITEM;\r\n    payload: number;\r\n}\r\n\r\ninterface plusItem {\r\n    type: ActionTypes.PLUS_ITEM;\r\n    payload: number;\r\n}\r\n\r\ninterface minusItem {\r\n    type: ActionTypes.MINUS_ITEM;\r\n    payload: number;\r\n}\r\n\r\nexport type MenuAction = FetchMenuErrorAction |\r\n    FetchMenuSuccessAction |\r\n    FetchMenuAction |\r\n    RemoveItem |\r\n    plusItem |\r\n    minusItem |\r\n    addCart","import {TypedUseSelectorHook, useSelector} from \"react-redux\";\r\nimport {RootState} from \"../store/redusers\";\r\n\r\nexport const useTypedSelector: TypedUseSelectorHook<RootState> = useSelector\r\n\r\n/**\r\n * creating a universal useSelector hook, for reuse\r\n */\r\n\r\n","import {MenuAction, ActionTypes} from \"../../types\";\r\nimport {Dispatch} from \"redux\";\r\n\r\n/**\r\n *Download a list of cart items from the server 'http://localhost:3001/menu' for local development\r\n *Server for Github Pages 'https://alex5678910.github.io/optimax-dev-test-json-api/api/db.json'\r\n */\r\n\r\nexport const fetchMenu = () => {\r\n    return async (dispatch: Dispatch<MenuAction>) => {\r\n        try {\r\n            dispatch({type: ActionTypes.FETCH_MENU})\r\n            let db = await fetch('http://localhost:3001/menu', {\r\n                headers: { 'Content-Type': 'application/json' }\r\n            }).then(res => res.json())\r\n            ;\r\n            dispatch({type: ActionTypes.FETCH_MENU_SUCCESS, payload: db,})\r\n        }catch (e) {\r\n            dispatch({type: ActionTypes.FETCH_MENU_ERROR, payload: 'Произошла ошибка, проверьте сервер!'})\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\n","import React, {useEffect} from 'react';\r\nimport {useTypedSelector} from \"../hooks/useTypeSelector\";\r\nimport {useDispatch} from \"react-redux\";\r\nimport {fetchMenu} from \"../store/action-creators/CartFetch\";\r\nimport {ActionTypes} from \"../types\";\r\n\r\n/**\r\n * defining the type of the confirm global variable\r\n */\r\ndeclare var confirm: (question: string) => boolean\r\n\r\nconst MenuList: React.FC = () => {\r\n    const {loading, error, menu} = useTypedSelector(state => state.menu)\r\n    const dispatch = useDispatch()\r\n\r\n    /**\r\n     * I make a request to the server\r\n     */\r\n    useEffect(() => {\r\n        dispatch(fetchMenu())\r\n    }, [dispatch])\r\n\r\n    if (loading) {\r\n        return <h1>Loading....</h1>\r\n    }\r\n\r\n    if (error) {\r\n        return <h1>{error}</h1>\r\n    }\r\n\r\n    /**\r\n     * Remove item from cart by ID\r\n     */\r\n    const removeHandler = (elem: { id: number }) => {\r\n        const shoudRemove = confirm('Are you sure you want to delete the product?')\r\n        if (shoudRemove) {\r\n            dispatch({type: ActionTypes.REMOVE_ITEM, payload: elem.id})\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Increase count of item\r\n     */\r\n    const plusHandler = (elem: { id: number }) => {\r\n        dispatch({type: ActionTypes.PLUS_ITEM, payload: elem.id})\r\n    }\r\n\r\n    /**\r\n     * Decrease count of item\r\n     */\r\n    const minusHandler = (elem: { id: number, quantity: number }) => {\r\n        const min = menu.find(e => {\r\n            return e.quantity === elem.quantity\r\n        })\r\n        if (min.quantity > 0) {\r\n            dispatch({type: ActionTypes.MINUS_ITEM, payload: elem.id})\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <table className={'Table'}>\r\n                <thead className={'Thead'}>\r\n                <tr>\r\n                    <th className={'Box-title'}>Product name</th>\r\n                    <th className={'Box-title'}>Quantity</th>\r\n                    <th className={'Box-title'}>Price</th>\r\n                </tr>\r\n                </thead>\r\n                <tbody>\r\n                {menu.length > 0 ?\r\n                    menu.map((e, index) => {\r\n                        return (\r\n                            <tr key={index}>\r\n                                <td className={'Title-td'}>{e.title}</td>\r\n                                <td><span className={'Increase'} onClick={() => plusHandler(e)}>\r\n                            +</span><span>{e.quantity}</span>\r\n                                    <span className={'Decrease'}\r\n                                          onClick={() => minusHandler(e)}>\r\n                            -</span></td>\r\n                                <td>{e.price}</td>\r\n                                <td>\r\n                                    <button className={'Del'} onClick={() => removeHandler(e)}>Del</button>\r\n                                </td>\r\n                            </tr>\r\n                        )\r\n                    }) : <tr className={'Quantity'}>\r\n                        <td>NO PRODUCT</td>\r\n                    </tr>\r\n                }\r\n                </tbody>\r\n            </table>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default MenuList;","import React, {useRef, useState} from 'react';\r\nimport {useDispatch} from \"react-redux\";\r\nimport {ActionTypes} from \"../types\";\r\n\r\nconst FormItem: React.FC = () => {\r\n    const dispatch = useDispatch()\r\n    const [title, setTitle] = useState<string>('')\r\n    const [quantity, setQuantity] = useState<number>(1)\r\n    const [price, setPrice] = useState<number>(1)\r\n    const inputRef = useRef() as React.MutableRefObject<HTMLInputElement>\r\n\r\n    const handleInput1 = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        setTitle(event.target.value.slice(0, 15))\r\n    }\r\n    const handleInput2 = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        setQuantity(+event.target.value.slice(0, 5))\r\n    }\r\n    const handleInput3 = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        setPrice(+event.target.value.slice(0, 5))\r\n    }\r\n\r\n    /**\r\n     * product addition function\r\n     */\r\n    const addCart = (e: React.SyntheticEvent) => {\r\n        e.preventDefault()\r\n        if (title && price && quantity) {\r\n            dispatch({\r\n                type: ActionTypes.ADD_CART,\r\n                payload: {\r\n                    title,\r\n                    price,\r\n                    quantity,\r\n                    id: new Date()\r\n                }\r\n            })\r\n        }\r\n        if(title === ''){\r\n            inputRef.current.focus()\r\n            setQuantity(quantity)\r\n            setPrice(price)\r\n        }\r\n        if(title !== ''){\r\n            setTitle('')\r\n            setQuantity(1)\r\n            setPrice(1)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <form onSubmit={addCart}>\r\n            <button type=\"submit\">Send to cart</button>\r\n            <label>\r\n                <input\r\n                    ref={inputRef}\r\n                    placeholder={'Name of product'}\r\n                    type=\"text\"\r\n                    value={title}\r\n                    onChange={handleInput1}\r\n                />\r\n                Name product\r\n            </label>\r\n            <label>\r\n                <input\r\n                    placeholder={'Quantity of product'}\r\n                    type=\"number\"\r\n                    value={quantity}\r\n                    onChange={handleInput2}\r\n                />\r\n                Quantity\r\n            </label>\r\n            <label>\r\n                <input\r\n                    placeholder={'Price of product'}\r\n                    type=\"number\"\r\n                    value={price}\r\n                    onChange={handleInput3}\r\n                />\r\n                Price\r\n            </label>\r\n        </form>\r\n    );\r\n};\r\n\r\nexport default FormItem;\r\n","import React from 'react';\nimport MenuList from \"./components/MenuList\";\nimport FormItem from \"./components/FormItem\";\n\nfunction App() {\n    return (\n        <div className=\"App\">\n            <FormItem/>\n            <MenuList/>\n        </div>\n    );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import {MenuAction, ActionTypes, MenuState} from \"../../types\";\r\n\r\nconst initialState: MenuState = {\r\n    menu: [],\r\n    loading: false,\r\n    error: null,\r\n}\r\n\r\nexport const reducer = (state = initialState, action: MenuAction): MenuState => {\r\n    switch (action.type) {\r\n        case ActionTypes.FETCH_MENU:\r\n            return {\r\n                loading: true,\r\n                error: null,\r\n                menu: []\r\n            }\r\n        case ActionTypes.FETCH_MENU_SUCCESS:\r\n            return {\r\n                loading: false,\r\n                error: null,\r\n                menu: action.payload\r\n            }\r\n        case ActionTypes.FETCH_MENU_ERROR:\r\n            return {\r\n                loading: false,\r\n                error: action.payload,\r\n                menu: []\r\n            }\r\n        case  ActionTypes.REMOVE_ITEM:\r\n            return {\r\n                ...state, menu: state.menu.filter(({ id }) => id !== action.payload)\r\n            }\r\n        case  ActionTypes.PLUS_ITEM:\r\n            return {\r\n                ...state, menu: state.menu.map(el => el.id === action.payload ? { ...el, quantity: el.quantity + 1} : el)\r\n            }\r\n        case  ActionTypes.MINUS_ITEM:\r\n            return {\r\n                ...state, menu: state.menu.map(el => el.id === action.payload ? { ...el, quantity: el.quantity - 1} : el)\r\n            }\r\n        case  ActionTypes.ADD_CART:\r\n            return {\r\n                ...state, menu: [action.payload, ...state.menu]\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}","import {combineReducers} from \"redux\";\r\nimport {reducer} from \"./rootReducer\"\r\n\r\nexport const rootReducer = combineReducers({\r\n    menu: reducer\r\n})\r\n\r\nexport type RootState = ReturnType<typeof rootReducer>","import {applyMiddleware, createStore} from \"redux\";\r\nimport thunk from \"redux-thunk\";\r\nimport {rootReducer} from \"./redusers\";\r\n\r\nexport const store = createStore(rootReducer, applyMiddleware(thunk))","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport {Provider} from \"react-redux\";\nimport {store} from \"./store\";\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>, document.getElementById('root')\n);\n\nreportWebVitals();\n"],"sourceRoot":""}